<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script data-require="angular.js@*" data-semver="1.3.1" src="//code.angularjs.org/1.3.1/angular.js"></script>
</head>
<body data-ng-app="CaseManagement.App" id="ng-app" data-ng-controller="TestController">
    <script type="text/javascript">
        var CMAPP = angular.module('CaseManagement.App', []);
    </script>
    <script type="text/javascript">
        CMAPP.factory('TestService', function ($http) {
            return {
                getContent: function(callback) {
                    $http.get('http://localhost:98/Page/Index').then(function(response) {
                        callback(response.data);
                    });
                }
            };
        });
        CMAPP.controller('TestController', function ($scope, TestService, $sce, $compile) {

            var setContent = function (data) {
                var html = data;//$sce.trustAsHtml(data);
                // Step 1: parse HTML into DOM element
                var template = angular.element(html);

                // Step 2: compile the template
                var linkFn = $compile(template);

                // Step 3: link the compiled template with the scope.
                var element = linkFn($scope);

                // Step 4: Append to DOM (optional)
                //                
                var parent = document.getElementById('content');
                parent.appendChild(element);
                //$scope.content = element; //$sce.trustAsHtml(data);
            };
            $scope.getContent = function () {
                TestService.getContent(setContent);
////                    .then(function (data) {
////                    var test = data;
////                    $scope.content = data;
////                });
//
//                var test3 = test1;
            };

        });
    </script>
    <form>
        <div id="content">
            <button type="submit" data-ng-click="getContent()">Get Content</button>
            <div ng-bind-html="content" ng-init="cases.caseDetails.Id = '1'"></div>
            <div id="test"></div>
        </div>
        
    </form>
</body>

</html>
