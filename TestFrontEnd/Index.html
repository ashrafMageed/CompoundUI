<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script data-require="angular.js@*" data-semver="1.3.1" src="//code.angularjs.org/1.3.1/angular.js"></script>
    <script type="text/javascript">
    var cmtest1 = angular.module('test1', []);
    </script>
    <script type="text/javascript">
        cmtest1.factory('Test1Service', function ($http) {
            return {
                getContent: function (callback) {
                    $http.get('http://localhost:98/Page/Test').then(function (response) {
                        callback(response.data);
                    });
                }
            };
        });
        cmtest1.controller('Test1Controller', function ($scope, Test1Service, $sce, $compile) {

            var setContent = function (data) {
                var html = $sce.trustAsHtml(data);
                var module = document.getElementById('content1');
                var CMAPP = angular.module('test', []);
                module.innerHTML = html;
                angular.element(document).ready(function() {
                    angular.bootstrap(module, ['test']);
                });

            };
            $scope.getContent = function () {
                Test1Service.getContent(setContent);
            };

        });
    </script>

</head>
<body>


        <div data-ng-app="test1" id="ng-app" ng-controller="Test1Controller">
            
            <button type="button" data-ng-click="getContent()">Get Content</button>

            <div id="test"></div>
        </div>
        <div id="content1"></div>
        
  
</body>

</html>
